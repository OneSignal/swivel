!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,r.swivel=e()}}(function(){return function e(r,t,n){function o(a,u){if(!t[a]){if(!r[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var f=t[a]={exports:{}};r[a][0].call(f.exports,function(e){var t=r[a][1][e];return o(t?t:e)},f,f.exports,e,r,t,n)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,r,t){r.exports=function(e,r){return Array.prototype.slice.call(e,r)}},{}],2:[function(e,r,t){"use strict";var n=e("ticky");r.exports=function(e,r,t){e&&n(function(){e.apply(t||null,r||[])})}},{ticky:4}],3:[function(e,r,t){"use strict";var n=e("atoa"),o=e("./debounce");r.exports=function(e,r){var t=r||{},i={};return void 0===e&&(e={}),e.on=function(r,t){return i[r]?i[r].push(t):i[r]=[t],e},e.once=function(r,t){return t._once=!0,e.on(r,t),e},e.off=function(r,t){var n=arguments.length;if(1===n)delete i[r];else if(0===n)i={};else{var o=i[r];if(!o)return e;o.splice(o.indexOf(t),1)}return e},e.emit=function(){var r=n(arguments);return e.emitterSnapshot(r.shift()).apply(this,r)},e.emitterSnapshot=function(r){var a=(i[r]||[]).slice(0);return function(){var i=n(arguments),u=this||e;if("error"===r&&t["throws"]!==!1&&!a.length)throw 1===i.length?i[0]:i;return a.forEach(function(n){t.async?o(n,i,u):n.apply(u,i),n._once&&e.off(r,n)}),e}},e}},{"./debounce":2,atoa:1}],4:[function(e,r,t){var n,o="function"==typeof setImmediate;n=o?function(e){setImmediate(e)}:function(e){setTimeout(e,0)},r.exports=n},{}],5:[function(e,r,t){"use strict";function n(){function e(e){function r(){return n[e].apply(this,arguments),u}return r}function r(){var e=i.parsePayload(o(arguments)),r=new MessageChannel;return r.port1.onmessage=s,null===navigator.serviceWorker.controller?Promise.reject(new Error("ServiceWorker controller not found.")):navigator.serviceWorker.controller.postMessage(e,[r.port2])}function t(e){var r=e.data;r&&r.__broadcast&&n.emit.apply({broadcast:!0},[r.type].concat(r.payload))}var n=a(),u={on:e("on"),once:e("once"),off:e("off"),emit:r},s=i.emission(n,{broadcast:!1});return navigator.serviceWorker.onmessage=t,u}var o=e("atoa"),i=e("./serialization"),a=e("contra/emitter");r.exports=n},{"./serialization":6,atoa:1,"contra/emitter":3}],6:[function(e,r,t){"use strict";function n(e){return e?e.toString():null}function o(e){return e?new Error(e):null}function i(e){var r=e.shift();return"error"===r?{error:n(e[0]),type:r,payload:[]}:{error:null,type:r,payload:e}}function a(e,r){function t(t){var n=t.data;"error"===n.type?e.emit.call(r,"error",o(n.error)):e.emit.apply(r,[n.type].concat(n.payload))}return t}r.exports={parsePayload:i,emission:a}},{}],7:[function(e,r,t){"use strict";function n(){throw new Error("Swivel couldn't detect ServiceWorker support. Please feature detect before using Swivel in your web pages!")}var o,i=e("./page"),a=e("./worker");o="serviceWorker"in navigator?i():"clients"in self?a():{on:n,once:n,off:n,emit:n,broadcast:n},r.exports=o},{"./page":5,"./worker":8}],8:[function(e,r,t){"use strict";function n(){function e(e){function r(){return u[e].apply(this,arguments),s}return r}function r(e){var r={reply:n.bind(null,e.ports[0])};i.emission(u,r)(e)}function t(e){function r(e){return e.map(t)}function t(r){return r.postMessage({type:e,payload:n,__broadcast:!0})}var n=o(arguments,1);return self.clients.matchAll().then(r)}function n(e){var r=i.parsePayload(o(arguments,1));e.postMessage(r)}var u=a(),s={on:e("on"),once:e("once"),off:e("off"),broadcast:t,emit:n};return self.addEventListener("message",r),s}var o=e("atoa"),i=e("./serialization"),a=e("contra/emitter");r.exports=n},{"./serialization":6,atoa:1,"contra/emitter":3}]},{},[7])(7)});